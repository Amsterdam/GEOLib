from typing import List
from enum import IntEnum

from pydantic import constr, confloat

from geolib.models.dseries_parser import DSeriesNameKeyValueSubStructure
from geolib.models.internal import Bool


class SoilType(IntEnum):
    GRAVEL = 0
    SAND = 1
    LOAM = 2
    CLAY = 3
    PEAT = 4
    SANDYLOAM = 5


class MaxConeResistType(IntEnum):
    STANDARD = 0
    MANUAL = 1


class Soil(DSeriesNameKeyValueSubStructure):
    name: constr(min_length=1, max_length=25)
    soilcolor: int = 10871211  # could be color
    soilsoiltype: SoilType = SoilType.SAND
    soilbelgiansoiltype: SoilType = SoilType.SAND
    soilgamdry: confloat(ge=0.0, le=100) = 20.00
    soilgamwet: confloat(ge=0.0, le=100) = 20.00
    soilinitialvoidratio: confloat(ge=0.0, le=20.0) = 0.001001
    soildiameterd50: confloat(ge=0.0, le=1000.0) = 0.20000
    soilminvoidratio: confloat(ge=0.0, le=1.0) = 0.400
    soilmaxvoidratio: confloat(ge=0.0, le=1.0) = 0.800
    soilcohesion: confloat(ge=0.0, le=1000.0) = 30.00
    soilphi: confloat(ge=0.0, le=89.0)
    soilcu: confloat(ge=0.0, le=1000.0)
    soilmaxconeresisttype: MaxConeResistType = MaxConeResistType.STANDARD
    soilmaxconeresist: confloat(ge=0.0, le=1000000.0) = 0.00
    soilusetension: Bool = Bool.TRUE
    soilca: confloat(ge=0.0, le=10.0) = 0.0040000
    soilccindex: confloat(ge=0.0, le=20.0) = 0.1260000

    def __init__(self, *args, **kwargs):
        if "name" not in kwargs:
            name = None
            for key, value in kwargs.items():
                if key not in self.__fields__:
                    name = key + value
                    break
            if name:
                kwargs["name"] = name
                kwargs.pop(key)
        super().__init__(*args, **kwargs)

    class Config:
        arbitrary_types_allowed = True
        validate_assignment = True

    @classmethod
    def default_soils(cls) -> List["Soil"]:

        default_props = [
            (
                "BClay, clean, moderate",
                SoilType.CLAY,
                18.0,
                18.0,
                20.0,
                8.0,
                8.0,
                1.0,
                1.0,
                0.001001,
                10871211,
            ),
            (
                "BClay, clean, modstiff",
                SoilType.CLAY,
                19.0,
                19.0,
                20.0,
                15.0,
                15.0,
                1.0,
                1.0,
                0.001001,
                12837291,
            ),
            (
                "BClay, clean, stiff",
                SoilType.CLAY,
                19.0,
                19.0,
                20.0,
                15.0,
                15.0,
                1.0,
                1.0,
                0.001001,
                11526571,
            ),
            (
                "BClay, clean, weak",
                SoilType.CLAY,
                17.0,
                17.0,
                20.0,
                4.0,
                4.0,
                1.0,
                1.0,
                0.001001,
                12181931,
            ),
            (
                "BClay, sl san, moderate",
                SoilType.CLAY,
                18.0,
                18.0,
                22.0,
                8.0,
                8.0,
                1.0,
                1.0,
                0.001001,
                11527851,
            ),
            (
                "BClay, sl san, modstiff",
                SoilType.CLAY,
                19.0,
                19.0,
                22.0,
                15.0,
                15.0,
                1.0,
                1.0,
                0.001001,
                13493931,
            ),
            (
                "BClay, sl san, stiff",
                SoilType.CLAY,
                19.0,
                19.0,
                22.0,
                15.0,
                15.0,
                1.0,
                1.0,
                0.001001,
                12183211,
            ),
            (
                "BClay, sl san, weak",
                SoilType.CLAY,
                17.0,
                17.0,
                22.0,
                4.0,
                4.0,
                1.0,
                1.0,
                0.001001,
                12838571,
            ),
            (
                "BGravel, clean, moderate",
                SoilType.GRAVEL,
                19.0,
                21.0,
                40.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                9205895,
            ),
            (
                "BGravel, clean, stiff",
                SoilType.GRAVEL,
                19.0,
                21.0,
                40.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                9861255,
            ),
            (
                "BGravel, ve sil, moderate",
                SoilType.GRAVEL,
                20.0,
                22.0,
                37.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                8549255,
            ),
            (
                "BGravel, ve sil, stiff",
                SoilType.GRAVEL,
                20.0,
                22.0,
                37.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                9204615,
            ),
            (
                "BLoam, clean, moderate",
                SoilType.LOAM,
                19.0,
                19.0,
                22.0,
                4.0,
                4.0,
                1.0,
                1.0,
                0.001001,
                10850182,
            ),
            (
                "BLoam, clean, modstiff",
                SoilType.LOAM,
                20.0,
                20.0,
                22.0,
                8.0,
                8.0,
                1.0,
                1.0,
                0.001001,
                12816262,
            ),
            (
                "BLoam, clean, stiff",
                SoilType.LOAM,
                20.0,
                20.0,
                22.0,
                8.0,
                8.0,
                1.0,
                1.0,
                0.001001,
                11505542,
            ),
            (
                "BLoam, clean, weak",
                SoilType.LOAM,
                18.0,
                18.0,
                22.0,
                2.0,
                2.0,
                1.0,
                1.0,
                0.001001,
                12160902,
            ),
            (
                "BLoam, sl san, moderate",
                SoilType.LOAM,
                19.0,
                19.0,
                25.0,
                4.0,
                4.0,
                1.0,
                1.0,
                0.001001,
                11506822,
            ),
            (
                "BLoam, sl san, modstiff",
                SoilType.LOAM,
                20.0,
                20.0,
                25.0,
                8.0,
                8.0,
                1.0,
                1.0,
                0.001001,
                13472902,
            ),
            (
                "BLoam, sl san, stiff",
                SoilType.LOAM,
                20.0,
                20.0,
                25.0,
                8.0,
                8.0,
                1.0,
                1.0,
                0.001001,
                12162182,
            ),
            (
                "BLoam, sl san, weak",
                SoilType.LOAM,
                18.0,
                18.0,
                25.0,
                2.0,
                2.0,
                1.0,
                1.0,
                0.001001,
                12817542,
            ),
            (
                "BPeat, sl san, moderate",
                SoilType.PEAT,
                14.0,
                14.0,
                15.0,
                10.0,
                10.0,
                1.0,
                1.0,
                0.001001,
                3418799,
            ),
            (
                "BPeat, sl san, stiff",
                SoilType.PEAT,
                14.0,
                14.0,
                15.0,
                10.0,
                10.0,
                1.0,
                1.0,
                0.001001,
                4074159,
            ),
            (
                "BPeat, sl san, weak",
                SoilType.PEAT,
                12.0,
                12.0,
                15.0,
                5.0,
                5.0,
                1.0,
                1.0,
                0.001001,
                4729519,
            ),
            (
                "BSand, clean, loose",
                SoilType.SAND,
                17.0,
                19.0,
                30.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                1368569,
            ),
            (
                "BSand, clean, moderate",
                SoilType.SAND,
                18.0,
                20.0,
                35.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                2023929,
            ),
            (
                "BSand, clean, stiff",
                SoilType.SAND,
                18.0,
                20.0,
                35.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                2679289,
            ),
            (
                "BSand, ve sil, loose",
                SoilType.SAND,
                17.0,
                19.0,
                27.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                711929,
            ),
            (
                "BSand, ve sil, moderate",
                SoilType.SAND,
                18.0,
                20.0,
                30.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                1367289,
            ),
            (
                "BSand, ve sil, stiff",
                SoilType.SAND,
                18.0,
                20.0,
                30.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.256082,
                2022649,
            ),
            (
                "Clay, clean, moderate",
                SoilType.CLAY,
                19.0,
                19.0,
                17.5,
                13.0,
                100.0,
                0.0921,
                0.0037,
                0.001001,
                10871201,
            ),
            (
                "Clay, clean, stiff",
                SoilType.CLAY,
                20.0,
                20.0,
                25.0,
                15.0,
                200.0,
                0.0768,
                0.0031,
                0.001001,
                11526561,
            ),
            (
                "Clay, clean, weak",
                SoilType.CLAY,
                17.0,
                17.0,
                17.5,
                5.0,
                50.0,
                0.1535,
                0.0061,
                0.001001,
                12181921,
            ),
            (
                "Clay, organ, moderate",
                SoilType.CLAY,
                16.0,
                16.0,
                15.0,
                1.0,
                30.0,
                0.1535,
                0.0077,
                0.001001,
                12841121,
            ),
            (
                "Clay, organ, weak",
                SoilType.CLAY,
                15.0,
                15.0,
                15.0,
                1.0,
                25.0,
                0.2302,
                0.0115,
                0.001001,
                14151841,
            ),
            (
                "Clay, sl san, moderate",
                SoilType.CLAY,
                20.0,
                20.0,
                22.5,
                13.0,
                120.0,
                0.0768,
                0.0031,
                0.001001,
                11527841,
            ),
            (
                "Clay, sl san, stiff",
                SoilType.CLAY,
                21.0,
                21.0,
                27.5,
                15.0,
                170.0,
                0.046,
                0.0018,
                0.001001,
                12183201,
            ),
            (
                "Clay, sl san, weak",
                SoilType.CLAY,
                18.0,
                18.0,
                22.5,
                5.0,
                80.0,
                0.1151,
                0.0046,
                0.001001,
                12838561,
            ),
            (
                "Clay, ve san, stiff",
                SoilType.CLAY,
                20.0,
                20.0,
                32.5,
                1.0,
                10.0,
                0.0164,
                0.0007,
                0.001001,
                12839841,
            ),
            (
                "Gravel, sl sil, loose",
                SoilType.GRAVEL,
                18.0,
                20.0,
                35.0,
                0.0,
                0.0,
                0.0029,
                0.0,
                0.256082,
                7237245,
            ),
            (
                "Gravel, sl sil, moderate",
                SoilType.GRAVEL,
                19.0,
                21.0,
                37.5,
                0.0,
                0.0,
                0.0024,
                0.0,
                0.256082,
                7892605,
            ),
            (
                "Gravel, sl sil, stiff",
                SoilType.GRAVEL,
                20.0,
                22.0,
                40.0,
                0.0,
                0.0,
                0.0020,
                0.0,
                0.256082,
                8547965,
            ),
            (
                "Gravel, ve sil, loose",
                SoilType.GRAVEL,
                19.0,
                21.0,
                32.5,
                0.0,
                0.0,
                0.0048,
                0.0,
                0.256082,
                7893885,
            ),
            (
                "Gravel, ve sil, moderate",
                SoilType.GRAVEL,
                20.0,
                22.0,
                35.0,
                0.0,
                0.0,
                0.0029,
                0.0,
                0.256082,
                8549245,
            ),
            (
                "Gravel, ve sil, stiff",
                SoilType.GRAVEL,
                21.0,
                22.5,
                40.0,
                0.0,
                0.0,
                0.0018,
                0.0,
                0.180505,
                9204605,
            ),
            (
                "Loam, sl san, moderate",
                SoilType.LOAM,
                21.0,
                21.0,
                32.5,
                2.5,
                200.0,
                0.0329,
                0.0013,
                0.001001,
                11506812,
            ),
            (
                "Loam, sl san, stiff",
                SoilType.LOAM,
                22.0,
                22.0,
                35.0,
                3.8,
                300.0,
                0.023,
                0.0009,
                0.001001,
                12162172,
            ),
            (
                "Loam, sl san, weak",
                SoilType.LOAM,
                20.0,
                20.0,
                30.0,
                1.0,
                100.0,
                0.0512,
                0.002,
                0.001001,
                12817532,
            ),
            (
                "Loam, ve san, stiff",
                SoilType.LOAM,
                20.0,
                20.0,
                35.0,
                1.0,
                100.0,
                0.0329,
                0.0013,
                0.001001,
                12818812,
            ),
            (
                "Peat, mod pl, moderate",
                SoilType.PEAT,
                13.0,
                13.0,
                15.0,
                5.0,
                30.0,
                0.2302,
                0.0115,
                0.001001,
                6045349,
            ),
            (
                "Peat, not pl, weak",
                SoilType.PEAT,
                12.0,
                12.0,
                15.0,
                2.5,
                20.0,
                0.307,
                0.0153,
                0.001001,
                6699429,
            ),
            (
                "Sand, clean, loose",
                SoilType.SAND,
                18.0,
                20.0,
                32.5,
                0.0,
                0.0,
                0.0048,
                0.0,
                0.256082,
                1368559,
            ),
            (
                "Sand, clean, moderate",
                SoilType.SAND,
                19.0,
                21.0,
                35.0,
                0.0,
                0.0,
                0.0029,
                0.0,
                0.256082,
                2023919,
            ),
            (
                "Sand, clean, stiff",
                SoilType.SAND,
                20.0,
                22.0,
                40.0,
                0.0,
                0.0,
                0.0019,
                0.0,
                0.256082,
                2679279,
            ),
            (
                "Sand, sl sil, moderate",
                SoilType.SAND,
                19.0,
                21.0,
                32.5,
                0.0,
                0.0,
                0.0044,
                0.0,
                0.256082,
                710639,
            ),
            (
                "Sand, ve sil, loose",
                SoilType.SAND,
                19.0,
                21.0,
                30.0,
                0.0,
                0.0,
                0.0073,
                0.0,
                0.256082,
                711919,
            ),
            (
                "Undetermined",
                SoilType.LOAM,
                0.01,
                0.02,
                0.0,
                0.0,
                0.0,
                1.0,
                1.0,
                0.0,
                16777215,
            ),
        ]

        soils = [
            Soil(
                name=name,
                soilsoiltype=soilsoiltype,
                soilgamdry=soilgamdry,
                soilgamwet=soilgamwet,
                soilphi=soilphi,
                soilcohesion=soilcohesion,
                soilcu=soilcu,
                soilccindex=soilccindex,
                soilca=soilca,
                soilinitialvoidratio=soilinitialvoidratio,
                soilcolor=soilcolor,
            )
            for name, soilsoiltype, soilgamdry, soilgamwet, soilphi, soilcohesion, soilcu, soilccindex, soilca, soilinitialvoidratio, soilcolor in default_props
        ]
        return soils
